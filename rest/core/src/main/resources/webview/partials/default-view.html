<!-- /*!
 * PENTAHO CORPORATION PROPRIETARY AND CONFIDENTIAL
 *
 * Copyright 2002 - 2015 Pentaho Corporation (Pentaho). All rights reserved.
 *
 * NOTICE: All information including source code contained herein is, and
 * remains the sole property of Pentaho and its licensors. The intellectual
 * and technical concepts contained herein are proprietary and confidential
 * to, and are trade secrets of Pentaho and may be covered by U.S. and foreign
 * patents, or patents in process, and are protected by trade secret and
 * copyright laws. The receipt or possession of this source code and/or related
 * information does not convey or imply any rights to reproduce, disclose or
 * distribute its contents, or to manufacture, use, or sell anything that it
 * may describe, in whole or in part. Any reproduction, modification, distribution,
 * or public display of this information without the express written authorization
 * from Pentaho is strictly prohibited and in violation of applicable laws and
 * international treaties. Access to the source code contained herein is strictly
 * prohibited to anyone except those individuals and entities who have executed
 * confidentiality and non-disclosure agreements or other agreements with Pentaho,
 * explicitly covering such access.
 */ -->
<div id="state-form">
  <div class="nav left">
    <ul>
      <li><a ng-click="profileAppService.leftNavSelection = 'stats';" ng-class="{'active': profileAppService.leftNavSelection == 'stats'}">S</a></li>
      <li><a ng-click="profileAppService.leftNavSelection = 'tree';" ng-class="{'active': profileAppService.leftNavSelection == 'tree'}">T</a></li>
      <li><a ng-click="profileAppService.leftNavSelection = 'config';" ng-class="{'active': profileAppService.leftNavSelection == 'config'}">C</a></li>
    </ul>
  </div>

  <div class="state-form-wrap" ng-switch on="profileAppService.leftNavSelection">
    <div class="state-form-view" ng-class="{'active': profileAppService.leftNavSelection == 'stats'}" ng-switch-default>
      <div ng-repeat="fieldCol in profileAppService.tabularService.fieldCols">
        <input type="checkbox" ng-click="profileAppService.tabularService.toggleColDisplay(fieldCol)" ng-checked="fieldCol.display === true">{{ fieldCol.nameKey | translate }}
        <br>
      </div>
    </div>
    <div class="state-form-view" ng-class="{'active': profileAppService.leftNavSelection == 'tree'}" ng-switch-when="tree" ng-controller="TreeViewController">
      <div
          data-angular-treeview="true"
          data-tree-id="uniqueTreeId"
          data-tree-model="profileAppService.treeViewService.treedata"
          data-node-id="id"
          data-node-label="id"
          data-node-children="childProfiles" >
      </div>
    </div>
    <div class="state-form-view" ng-class="{'active': profileAppService.leftNavSelection == 'config'}" ng-switch-when="config">
      Configuration view
    </div>
  </div>
</div>
<div id="profileTabularView">
    <div class="profile-section profile-message"
         ng-class="profileAppService.operationError ? 'profile-error-message' : ''"
         ng-if="profileAppService.operationError">
        <div class="profile-message-img-cell">
            <div class="profile-message-img"></div>
        </div>
        <div class="profile-message-text">{{profileAppService.operationError.message.messageKey | translate | interpolateMessage:profileAppService.operationError.message.messageVariables}}</div>
        <ul class="profile-button-list">
          <li class="profile-button-list-element" ng-repeat="operation in profileAppService.operationError.recoveryOperations">
            <button class="pentaho-button profile-button" ng-click="profileAppService.startOperation(operation.id)" translate="{{operation.nameKey}}"></button>
          </li>
        </ul>
    </div>
    <div class="profile-section profile-message"
        ng-class="profileAppService.statusMessages ? 'profile-state-processing' : ''"
        ng-if="profileAppService.statusMessages">
      <div class="profile-message-img-cell">
        <div class="profile-message-img"></div>
      </div>
      <div class="profile-message-text">
        <div ng-repeat="operationMessage in profileAppService.statusMessages">{{operationMessage.messageKey | translate | interpolateMessage:operationMessage.messageVariables}}</div>
      </div>
      <div class="profile-message-action">
        <button class="pentaho-button profile-message-btn" ng-click="profileAppService.stopCurrentOperation();" translate="profiling.fields.stop"></button>
      </div>
    </div>
    <div class="profile-section profile-fields-container">
        <div class="pentaho-fieldgroup-major" translate="profiling.fields.title"></div>
        <div class="profile-dsi-container" ng-include="profileAppService.dataSourceUrl"></div>
        <div class="profile-fields-list-wrapper">
            <table class="pentaho-table profile-fields-list" cellspacing="0">
                <thead>
                    <tr>
                        <th ng-show="fieldCol.display === true" class="cellTableCol cellTableSortableHeader"
                            ng-repeat="fieldCol in profileAppService.tabularService.fieldCols"
                            ng-class="profileAppService.tabularService.orderByCol !== fieldCol.stringifiedPath ? '' : profileAppService.tabularService.isOrderReversed ? 'cellTableSortedHeaderDescending' : 'cellTableSortedHeaderAscending'"
                            ng-click="profileAppService.tabularService.onOrderByCol(fieldCol)">
                            <div class="cellTableHeaderContent">
                                <div translate="{{fieldCol.nameKey}}"></div>
                                <div class="cellTableHeaderOrderIndicator"></div>
                            </div>
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-class-odd="'cellTableOddRow'"
                        ng-class-even="'cellTableEvenRow'"
                        ng-repeat="fieldRow in profileAppService.tabularService.fieldRows | orderBy:profileAppService.tabularService.orderByKey:profileAppService.tabularService.isOrderReversed">
                        <td ng-show="fieldCol.display === true" class="cellTableCell"
                            ng-repeat="fieldCol in profileAppService.tabularService.fieldCols"
                            ng-class-odd="'cellTableOddRowCell'"
                            ng-class-even="'cellTableEvenRowCell'">{{fieldRow[fieldCol.stringifiedPath]}}</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>